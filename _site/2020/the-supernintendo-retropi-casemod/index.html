<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Lukas' Blog - The Super Nintendo RetroPie Casemod</title>
  <link rel="shortcut icon" href="/assets/images/favicon.ico">
  <link rel="stylesheet" href="/assets/css/style.css">
  <link rel="alternate" type="application/rss+xml" title="My Blog" href="/rss.xml">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/github-gist.min.css">
  <link rel="canonical" href="https://blog.cvguy.de/2020/the-supernintendo-retropi-casemod/">
  
    <meta property="og:url" content="https://blog.cvguy.de/2020/the-supernintendo-retropi-casemod/">
    <meta property="og:title" content="The Super Nintendo RetroPie Casemod">
    <meta property="og:description" content="Fitting a Raspberry Pi 4 into an original Super Nintendo case.">
    <meta property="og:image" content="https://blog.cvguy.de/images/the-super-nintendo-retropi-casemod/banner.png">
    <meta property="og:image:type" content="image/png">
    <meta property="og:image:width" content="200">
    <meta property="og:image:height" content="200">
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="The Super Nintendo RetroPie Casemod" />
    <meta name="twitter:description" content="Fitting a Raspberry Pi 4 into an original Super Nintendo case." />
    <meta name="twitter:image" content="https://blog.cvguy.de/images/the-super-nintendo-retropi-casemod/banner.png" />
  
</head>
<body>

  <nav class="main-nav">
    
        <a href="/"> <span class="arrow">←</span> Home </a>
    

    
        
            <a href="/about/">About </a>
        
    
    <a class="cta" href="/feed.xml">Subscribe</a>
</nav>


  

  <section id="wrapper" class="">
    <article class="post">
    <header>
        
            <img class="banner" src="/images/the-super-nintendo-retropi-casemod/banner.png">
        
        <h1>The Super Nintendo RetroPie Casemod</h1>
        <h2 class="headline">August 17, 2020</h2>
    </header>
    <section class="post-body">
        <p>Ok, this is a project that probably has been done many times already, but I needed to do this to resolve a little childhood trauma.
I had a Game Boy but my parents never allowed me to have a Super Nintendo.
I guess that is what you get when you spend too much time with your handheld console but not enough time with your homework.</p>

<p>Anyway, here is my attempt of creating a “console” that surpasses the original in many ways.</p>

<h1 id="buying-the-super-nintendo">Buying the Super Nintendo</h1>

<p>The other day I was on holiday in Otaru, Hokkaido.
Some Obasan (middle aged lady) along the way was having a garage sale.
And there it was: The original Super Famicon (Japanese Super Nintendo) from 1990.
It just costed me 1000 Yen (less than 10$)!</p>

<p>The Obasan was really surprised that I wanted to buy it and was thanking me repeatedly after I handed over the 1000 Yen bill.
On the downside, I had to carry it with me for the whole remaining day.
But thats a small price to pay for the “awesome” that is going to follow.</p>

<p><a href="/images/the-super-nintendo-retropi-casemod/super-famicon.jpeg" target="_blank"><img src="/assets/resized/super-famicon-480x357.jpeg" alt="The Super Famicon" /></a></p>

<h1 id="replacing-the-inside">Replacing the inside</h1>

<p>The Super Nintendo uses its own kind of screws and I had to buy a <a href="https://www.amazon.com/ATLIN-Screwdriver-Security-Nintendo-Cartridges/dp/B01N3UO3V7">special screw driver</a> just to be able to open up the case.
Luckily it was bit cheaper on Japanese Amazon (3-4$).</p>

<p><a href="/images/the-super-nintendo-retropi-casemod/screws.jpeg" target="_blank"><img src="/assets/resized/screws-480x358.jpeg" alt="The infamous &quot;Gamebit&quot; screw and driver" /></a></p>

<p>Back then, electronics were quite huge.
Opening up and disassembling the parts went rather smoothly.</p>

<p>Let’s see what we have:</p>

<p><a href="/images/the-super-nintendo-retropi-casemod/open-super-famicon.jpeg" target="_blank"><img src="/assets/resized/open-super-famicon-480x357.jpeg" alt="The opened up Super Nintendo" /></a></p>

<p><a href="/images/the-super-nintendo-retropi-casemod/parts.jpeg" target="_blank"><img src="/assets/resized/parts-480x326.jpeg" alt="Some of the bigger and mechanical parts" /></a></p>

<p><a href="/images/the-super-nintendo-retropi-casemod/super-famicon-board.jpeg" target="_blank"><img src="/assets/resized/super-famicon-board-480x358.jpeg" alt="The main board" /></a></p>

<p><a href="/images/the-super-nintendo-retropi-casemod/controller-connector.jpeg" target="_blank"><img src="/assets/resized/controller-connector-480x283.jpeg" alt="Connector board fo controller(s)" /></a></p>

<p>To replace most of these parts, I bought a <a href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/">Raspberry Pi 4</a>.
Choosing the Raspberry Pi (again) for this project is really a no brainer.
It is reasonably cheap and the available resources and software on the internet are endless.</p>

<p>To keep things simple and reduce connectors, I opted for cables directly coming out of the Super Nintendos case.
I use an USB-C cable for power and an HDMI cable for Video and Audio.</p>

<p>As a convenient extra, I also exposed an USB port with a rather strange extension plug that I had lying around.
I have no idea where I got that from but it fitted perfectly into the hole for the original A/V connector.</p>

<p><a href="/images/the-super-nintendo-retropi-casemod/replaced.jpeg" target="_blank"><img src="/assets/resized/replaced-480x360.jpeg" alt="New interior, awkwardly fixated by a glue gun." /></a></p>

<p><a href="/images/the-super-nintendo-retropi-casemod/new-back.jpeg" target="_blank"><img src="/assets/resized/new-back-480x360.jpeg" alt="The new back - &quot;MULTI OUT&quot; really holds up to its name" /></a></p>

<h1 id="using-buttons">Using Buttons</h1>

<p>The Super Nintendo has 3 buttons at the front.
Power, reset and the cartrige eject button.</p>

<p>Ejecting the cartrige from the Super Nintendo is solved purely mechanical with the big white plastic I took out earlier.
Since I do not have any need for game cartriges, I simply got rid of all these parts and glued the eject button from the inside, so it doesn’t hang loose.</p>

<p>The power as well as the reset button are simple switches as you can get them in any electronics store.
The power button is a <a href="https://en.wikipedia.org/wiki/Switch#Toggle_switch">toggle switch</a> while the reset button is a <a href="https://en.wikipedia.org/wiki/Push-button">momentary switch</a>.
These can be connected to the Raspberry Pi’s <a href="https://www.raspberrypi.org/documentation/usage/gpio/">GPIO</a>.
This is basically the simplest thing that you can connect to the Pi and there are tons of <a href="https://raspberrypihq.com/use-a-push-button-with-raspberry-pi-gpio/">tutorials</a> out there on how to do that.
After connecting the switches, their state can be read by the Pi.</p>

<p><a href="/images/the-super-nintendo-retropi-casemod/reset-on-board.jpeg" target="_blank"><img src="/assets/resized/reset-on-board-480x360.jpeg" alt="The reset button was on the main board ..." /></a></p>

<p><a href="/images/the-super-nintendo-retropi-casemod/reset-off-board.jpeg" target="_blank"><img src="/assets/resized/reset-off-board-480x360.jpeg" alt="... so I had to solder it off first" /></a></p>

<p>For safety reasons, I also inserted a 10 kOhm resistor in-between the wires to the GPIO. 
This will protect the Pi if the GPIO mode for the pin is accidentally set to output. 
An open switch without a resistor basically short circuit the GPIO if it is setup wrong.</p>

<p><a href="/images/the-super-nintendo-retropi-casemod/simple-protection.jpeg" target="_blank"><img src="/assets/resized/simple-protection-480x202.jpeg" alt="Simple resistor for protection" /></a></p>

<h1 id="connecting-the-original-controllers-and-using-the-power-led">Connecting the Original Controllers and Using the Power LED</h1>

<p>For the perfect retro feeling I also want to reuse the original controllers.
The <a href="https://gamefaqs.gamespot.com/snes/916396-super-nintendo/faqs/5395">low level specification</a> of the controllers was already reverse engineered a long time ago.</p>

<p>The specification mentions 5 Volt but the controllers also work well on the 3 Volts that are used by the Raspberry Pi’s GPIO.
All that has to be done is to power up the board and connect the clock/latch/data contacts with the Pi to communicate.</p>

<p><a href="/images/the-super-nintendo-retropi-casemod/controller-board-back.jpeg" target="_blank"><img src="/assets/resized/controller-board-back-480x295.jpeg" alt="Cable soldered to the board - it is very easy to guess the right pins by looking at the design" /></a></p>

<p>As you can see, the power indicating LED is also connected to this board.
It is hardwired to the power supply but I want to do something cooler with it.
By soldering the resistor off the board, I could separate it from its power supply.
Then I connected it to another GPIO pin with a more appropriate resistor (for 3 Volt).</p>

<p>Now I have full control over the LED.
For example I can make it pulsate - something that you will never see with the original Super Nintendo.</p>

<style>.embed-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; } .embed-container iframe, .embed-container object, .embed-container embed { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }</style>
<div class="embed-container">    <iframe title="YouTube video player" width="640" height="390" src="//www.youtube.com/embed/QlrdO7ZNx-U" frameborder="0" allowfullscreen=""></iframe></div>

<p><a href="/images/the-super-nintendo-retropi-casemod/new-inside.jpeg" target="_blank"><img src="/assets/resized/new-inside-480x360.jpeg" alt="Everything connected!" /></a></p>

<h1 id="software">Software</h1>

<p>This is also a no brainer.
<a href="https://retropie.org.uk/">RetroPie</a> is well known and makes it easy to set up the emulator on top of Raspbian OS.
There is really no need here to further explain the installation, just check out their homepage.</p>

<p>The <a href="https://github.com/petrockblog/SNESDev-RPi">driver for the controllers</a> has already been developed by petrockblog.
There is no need to get my own hands dirty.
It works fine even without the recommended adapter as long as the GPIO pins are <a href="https://github.com/petrockblog/SNESDev-RPi/blob/master/src/SNESDev.c#L161">connected correctly</a>.</p>

<p>Unfortunately the Super Nintendo controllers require polling and this cannot be avoided.
Additionally, the driver runs in userspace and checking with <code>top</code> shows a constant 2-3% CPU load due to the polling nature and many spin locks inside the drivers code.
I felt tempted to redevelop the driver as a kernel module to gain a performance boost from <a href="https://stackoverflow.com/questions/39876457/how-to-sleep-in-the-linux-kernel-space">kernel space delays</a>.
Well, even with this overhead the emulator is running fast enough, so this is an optimization project for another time.</p>

<h1 id="conclusion">Conclusion</h1>

<p>Now I have it!
A Super Nintendo that can run every game that was ever developed (as long as I have the ROM).
It would have been just too good to be true to have such a system in my childhood, but better late than never.</p>

<p>The Super Nintendo was such a popular system that everything was fully reverse engineered already and I didn’t have to do anything too crazy myself to realize this project.
Furthermore, modern hardware tends to follow unified standards more than back in the days.
I had success connecting a used PS3 controller as well as the switch joycons via Bluetooth.</p>

<p><a href="/images/the-super-nintendo-retropi-casemod/final.jpeg" target="_blank"><img src="/assets/resized/final-480x317.jpeg" alt="The final casemod" /></a></p>

    </section>
</article>

<footer id="post-meta" class="clearfix">
    <section id="sharing">
        <a class="twitter" href="https://twitter.com/intent/tweet?text=https://blog.cvguy.de/2020/the-supernintendo-retropi-casemod/ - The Super Nintendo RetroPie Casemod by @"><span class="icon-twitter"> Tweet</span></a>

<a class="facebook" href="#" onclick="
    window.open(
      'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),
      'facebook-share-dialog',
      'width=626,height=436');
    return false;"><span class="icon-facebook-rect"> Share</span>
</a>
    </section>
</footer>

<!-- Disqus comments -->

    <div class="archive readmore">
        <h3>Comments</h3>
        <section class="disqus">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'cvguyde';
        var disqus_developer = 0; // developer mode is on
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>
    </div>


<!-- Archive post list -->


    <footer id="footer">
    <p class="small">© Copyright 2022 Lukas</p>
</footer>
  </section>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="/assets/js/main.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/highlight.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/languages/bash.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/languages/yaml.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/languages/python.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/languages/kotlin.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/languages/dockerfile.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-79522465-1', 'auto');
    ga('send', 'pageview');
  </script>
</body>
</html>



